// Carbon Design System Overrides for "Neon Glass" Theme

// --- General Form Items ---
.cds--label {
  color: #f4f4f4 !important; // High contrast for dark mode
  font-family: var(--font-body);
  font-size: 0.85rem;
}

// --- Text Inputs, Text Areas, Select Triggers ---
.cds--text-input,
.cds--text-input-field,
.cds--text-area,
.cds--select-input,
.cds--dropdown, 
.cds--dropdown-text,
input.cds--text-input {
  background-color: rgba(255, 255, 255, 0.1) !important; // Light glass background
  color: #ffffff !important; // Pure white text
  border: none !important;
  border-bottom: 1px solid var(--border-color) !important;
  transition: all var(--transition-speed);
  font-family: var(--font-body);

  &:-webkit-autofill,
  &:-webkit-autofill:hover, 
  &:-webkit-autofill:focus, 
  &:-webkit-autofill:active{
      -webkit-box-shadow: 0 0 0 30px #262626 inset !important;
      -webkit-text-fill-color: white !important;
  }

  &::placeholder {
    color: rgba(255, 255, 255, 0.4); // Brighter placeholder
  }

  &:focus,
  &:active, 
  &.cds--dropdown--open {
    outline: none !important;
    border-bottom: 2px solid var(--primary-color) !important;
    box-shadow: 0 4px 12px rgba(0, 255, 255, 0.1);
  }
}

// Button overrides inside forms/modals
.cds--btn--primary {
  background-color: var(--primary-color) !important;
  color: #000 !important; // Black text on neon cyan
  font-weight: 600;
  border: none;
  
  &:hover {
    background-color: var(--primary-hover) !important;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
  }
}

.cds--btn--secondary, .cds--btn--tertiary, .cds--btn--ghost {
  color: var(--primary-color) !important;
  border-color: var(--primary-color) !important;
  
  &:hover {
    background-color: rgba(0, 255, 255, 0.1) !important; 
    color: var(--text-main) !important;
  }
}


// --- Modals ---
.cds--modal-container {
  background-color: var(--surface-solid) !important; // Solid background fallback
  background: rgba(15, 15, 35, 0.85) !important;   // Glassy background
  backdrop-filter: blur(20px);
  border: 1px solid rgba(0, 255, 255, 0.2);
  box-shadow: var(--shadow-card), 0 0 20px rgba(0, 0, 0, 0.5);
  border-radius: 12px;

  // Header
  .cds--modal-header {
    background: transparent !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding-bottom: 1rem;
    
    .cds--modal-heading {
      color: var(--primary-color);
      font-family: var(--font-heading);
      font-weight: 600;
      letter-spacing: 0.5px;
      text-shadow: 0 0 5px rgba(0, 255, 255, 0.3);
    }
    
    .cds--modal-close {
      border: 1px solid rgba(255,255,255,0.1);
      background-color: #000000 !important; // Solid Black
      border-radius: 4px;
      transition: all 0.2s;

      &:hover {
        background-color: #333333 !important; // Dark Grey on hover
        border-color: var(--primary-color);
      }
      .cds--modal-close__icon {
        fill: #ffffff !important; 
      }
    }
  }

  // Content
  .cds--modal-content {
    background: transparent !important;
    padding-top: 20px;
    color: var(--text-main);
    
    // Scrollbar styling for modal content
    &::-webkit-scrollbar {
      width: 8px;
    }
    &::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2); 
    }
    &::-webkit-scrollbar-thumb {
      background: rgba(123, 97, 255, 0.4); 
      border-radius: 4px;
    }
    &::-webkit-scrollbar-thumb:hover {
      background: rgba(123, 97, 255, 0.7); 
    }
  }

  // Footer
  .cds--modal-footer {
    background: transparent !important;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    .cds--btn {
      border-radius: 4px; 
    }
  }
}

// --- Dropdowns / Select Menus ---
.cds--dropdown, 
.cds--list-box,
.cds--list-box__field,
.cds--list-box__menu-item,
button.cds--list-box__field {
    background-color: rgba(255, 255, 255, 0.1) !important;
    border: none !important;
    border-bottom: 1px solid var(--border-color) !important;
    color: #ffffff !important;
}

.cds--list-box__label,
.cds--list-box__field:focus .cds--list-box__label,
button.cds--list-box__field .cds--list-box__label {
    color: #ffffff !important; 
}

.cds--list-box__menu {
  background-color: #161616 !important; // Dark background
  border: 1px solid var(--border-color);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  
  .cds--list-box__menu-item {
    color: #f4f4f4 !important; // Light text
    
    .cds--list-box__menu-item__option {
       color: inherit !important;
    }

    &:hover,
    &.cds--list-box__menu-item--highlighted {
      background-color: rgba(123, 97, 255, 0.2) !important; // Purple tint
      color: #ffffff !important;
      
      .cds--list-box__menu-item__option {
        color: #ffffff !important;
      }
    }
    
    &.cds--list-box__menu-item--active {
      color: var(--primary-color) !important;
      background-color: rgba(0, 255, 255, 0.1) !important;
      .cds--list-box__menu-item__option {
        color: var(--primary-color) !important;
      }
    }
  }
}

// Fix chevron icons
.cds--dropdown__arrow, 
.cds--list-box__menu-icon {
  fill: var(--text-secondary) !important;
}

// --- Notifications (Inline) ---
.cds--inline-notification {
  background: rgba(255, 255, 255, 0.05) !important;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(5px);
  
  &.cds--inline-notification--error {
     border-left: 4px solid #ff0055 !important;
     .cds--inline-notification__title { color: #ff0055; }
  }
  &.cds--inline-notification--success {
     border-left: 4px solid #00ffaa !important;
     .cds--inline-notification__title { color: #00ffaa; }
  }
  
  .cds--inline-notification__title,
  .cds--inline-notification__subtitle {
    color: var(--text-main);
  }
  .cds--inline-notification__close-button {
      &:hover { background: rgba(255,255,255,0.1); }
      .cds--inline-notification__close-icon { fill: var(--text-main); }
  }
}

// --- Input Validation Errors (Neon Style) ---
.cds--text-input--invalid, 
.cds--text-area--invalid,
.cds--select-input--invalid,
.cds--text-input[data-invalid] {
    border-bottom: 2px solid #ff0055 !important; // Neon Pink
    box-shadow: 0 4px 12px rgba(255, 0, 85, 0.15) !important;
}

// The error text below the input
.cds--form-requirement {
    color: #ff3377 !important; // Bright Neon Pink/Red
    font-size: 0.8rem;
    margin-top: 6px;
    font-weight: 500;
    font-family: var(--font-body);
    display: flex;
    align-items: center;
    
    // Add a small subtle glow/animation
    animation: slideDownFade 0.3s ease-out forwards;
}

// Error Icon inside the input
.cds--text-input__invalid-icon,
.cds--select__invalid-icon {
    fill: #ff0055 !important;
}

@keyframes slideDownFade {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

// --- Toast Notifications ---
.cds--toast-notification {
  background-color: rgba(30, 30, 30, 0.95) !important;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  margin-bottom: 0.5rem;

  .cds--toast-notification__title {
    color: #fff !important;
    font-weight: 600;
  }
  
  .cds--toast-notification__subtitle,
  .cds--toast-notification__caption {
    color: #dedede !important;
  }

  &.cds--toast-notification--error {
      border-left: 4px solid #ff0055;
      .cds--toast-notification__icon { fill: #ff0055 !important; }
  }

  &.cds--toast-notification--success {
      border-left: 4px solid #00ffaa;
      .cds--toast-notification__icon { fill: #00ffaa !important; }
  }
  
  &.cds--toast-notification--info {
      border-left: 4px solid #00aaff;
      .cds--toast-notification__icon { fill: #00aaff !important; }
  }

  &.cds--toast-notification--warning {
      border-left: 4px solid #ffaa00;
      .cds--toast-notification__icon { fill: #ffaa00 !important; }
  }
  
  .cds--toast-notification__close-button {
      .cds--toast-notification__close-icon { fill: #fff !important; }
  }
}

// Override Modal Header Color Globally - High Specifity
.cds--modal,
.cds--modal-container {
  .cds--modal-header__heading,
  .cds--modal-header__label {
    color: #f4f4f4 !important;
  }

  // Handle cases where label might be inside another element or shadowed
  .cds--modal-header {
      h2, h3, h4, p, span, div {
          color: #f4f4f4 !important;
      }
  }
}
